(function(t){function e(e){for(var o,i,a=e[0],l=e[1],c=e[2],d=0,m=[];d<a.length;d++)i=a[d],Object.prototype.hasOwnProperty.call(r,i)&&r[i]&&m.push(r[i][0]),r[i]=0;for(o in l)Object.prototype.hasOwnProperty.call(l,o)&&(t[o]=l[o]);u&&u(e);while(m.length)m.shift()();return n.push.apply(n,c||[]),s()}function s(){for(var t,e=0;e<n.length;e++){for(var s=n[e],o=!0,a=1;a<s.length;a++){var l=s[a];0!==r[l]&&(o=!1)}o&&(n.splice(e--,1),t=i(i.s=s[0]))}return t}var o={},r={app:0},n=[];function i(e){if(o[e])return o[e].exports;var s=o[e]={i:e,l:!1,exports:{}};return t[e].call(s.exports,s,s.exports,i),s.l=!0,s.exports}i.m=t,i.c=o,i.d=function(t,e,s){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:s})},i.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var s=Object.create(null);if(i.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)i.d(s,o,function(e){return t[e]}.bind(null,o));return s},i.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="/todo-list-vue/";var a=window["webpackJsonp"]=window["webpackJsonp"]||[],l=a.push.bind(a);a.push=e,a=a.slice();for(var c=0;c<a.length;c++)e(a[c]);var u=l;n.push([0,"chunk-vendors"]),s()})({0:function(t,e,s){t.exports=s("56d7")},"034f":function(t,e,s){"use strict";s("4ef4")},"09c9":function(t,e,s){"use strict";s("d106")},"0b4b":function(t,e,s){"use strict";s("294e")},1:function(t,e){},"10dc":function(t,e,s){},"294e":function(t,e,s){},"4ef4":function(t,e,s){},5296:function(t,e,s){"use strict";s("10dc")},"56d7":function(t,e,s){"use strict";s.r(e);var o=s("2b0e"),r=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"app"}},[s("Sidebar",{attrs:{routes:t.routes}}),s("router-view")],1)},n=[],i=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"sidebar"},[s("ul",[t.loggedIn?s("router-link",{attrs:{to:{name:"tasks"}}},[s("div",{staticClass:"card-option"},[t._v("Tasks"),s("div",{staticClass:"border"})])]):t._e(),t.loggedIn?s("router-link",{attrs:{to:{name:"user"}}},[s("div",{staticClass:"card-option"},[t._v("Account"),s("div",{staticClass:"border"})])]):t._e(),t.loggedIn?s("router-link",{attrs:{to:{name:"logout"}}},[s("div",{staticClass:"card-option"},[t._v("logout"),s("div",{staticClass:"border"})])]):t._e(),t.loggedIn?t._e():s("router-link",{attrs:{to:{name:"login"}}},[s("div",{staticClass:"card-option"},[t._v("Login"),s("div",{staticClass:"border"})])]),t.loggedIn?t._e():s("router-link",{attrs:{to:{name:"register"}}},[s("div",{staticClass:"card-option"},[t._v("Register"),s("div",{staticClass:"border"})])])],1)])},a=[],l={props:{routes:{type:Array,required:!0}},computed:{loggedIn(){return this.$store.getters.loggedIn}}},c=l,u=(s("e490"),s("935f")),d=Object(u["a"])(c,i,a,!1,null,"89b8dee2",null),m=d.exports,p=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"dash-notes"},[t._l(t.notes,(function(e){return s("my-note",{attrs:{id:e._id,title:e.title,content:e.content},on:{reload:t.load}})})),s("my-note",{attrs:{type:"empty"}})],2)},h=[],_=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{class:"empty"===t.type?t.show_form?"note note-form":"note empty-note":"note"},["empty"!==t.type?s("div",{staticClass:"icons"},[s("font-awesome-icon",{staticClass:"icon edit-icon",attrs:{icon:"edit"},on:{click:t.show_edit_form}}),s("font-awesome-icon",{staticClass:"icon trash-icon",attrs:{icon:"trash"},on:{click:t.delete_note}})],1):t._e(),"empty"===t.type?s("div",{class:t.new_note_class},[t.show_form?s("form",{staticClass:"form-content",on:{submit:function(e){return e.preventDefault(),t.save(e)}}},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.note.title,expression:"note.title"}],staticClass:"note-input-title",domProps:{value:t.note.title},on:{input:function(e){e.target.composing||t.$set(t.note,"title",e.target.value)}}}),s("textarea",{directives:[{name:"model",rawName:"v-model",value:t.note.content,expression:"note.content"}],staticClass:"note-input-content",domProps:{value:t.note.content},on:{input:function(e){e.target.composing||t.$set(t.note,"content",e.target.value)}}}),s("form-button",{staticClass:"float float-left",attrs:{type:"submit",btnStyle:"success",text:"Create"}}),s("form-button",{staticClass:"float float-right",attrs:{type:"button",btnStyle:"danger",text:"Cancel"},on:{click:t.show_create}})],1):s("span",{on:{click:t.show_create}},[t._v("+")])]):t.show_update?s("div",[s("form",{on:{submit:function(e){return e.preventDefault(),t.update(e)}}},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.note.title,expression:"note.title"}],staticClass:"note-input-title",domProps:{value:t.note.title},on:{input:function(e){e.target.composing||t.$set(t.note,"title",e.target.value)}}}),s("textarea",{directives:[{name:"model",rawName:"v-model",value:t.note.content,expression:"note.content"}],staticClass:"note-input-content",domProps:{value:t.note.content},on:{input:function(e){e.target.composing||t.$set(t.note,"content",e.target.value)}}}),s("form-button",{staticClass:"float float-center",attrs:{type:"submit",btnStyle:"success",text:"Save"}})],1)]):s("div",[s("h2",[t._v(t._s(t.title))]),s("p",[t._v(t._s(t.content))])])])},f=[],v=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("button",{class:"button "+t.btnStyle,attrs:{type:t.type},on:{click:function(e){return t.handleClick()}}},[t._v(" "+t._s(t.text)+" ")])},g=[],b={props:["type","text","btnStyle"],data(){return{new_note_class:"new-note-button",show_form:!1,i_title:"Title",i_content:"What do you have to do next?"}},methods:{handleClick(){this.$emit("click")}}},w=b,y=(s("8be3"),Object(u["a"])(w,v,g,!1,null,"d30ead92",null)),C=y.exports;class k{constructor(t,e=null){this._resource=t("api/notes{/id}")}get_all(){return this._resource.query().then(t=>t.json(),t=>{console.log(t)})}add(t){return this._resource.save(t)}update(t,e){if(t)return this._resource.update({id:t},e)}remove(t){return console.log(t),this._resource.delete({id:t})}}class x{constructor(t="",e=""){this.title=t,this.content=e}}var $={components:{"form-button":C},props:["title","content","id","type"],created(){this.note.title=this.title||"Title",this.note.content=this.content||"What do you have to do next?",this.service=new k(this.$resource)},data(){return{new_note_class:"new-note-button",show_form:!1,show_update:!1,note:new x}},methods:{show_create(){this.show_form?(this.new_note="new-note-button",this.show_form=!1):(this.new_note="new-note-input",this.show_form=!0)},show_edit_form(){this.show_update=!this.show_update},save(){this.service.add(this.note).then(()=>{this.new_note="new-note-button",this.show_form=!1,this.note.title="Title",this.note.content="What do you have to do next?",this.$root.$emit("reload")},t=>{alert("Unexpected error, try again later.")})},update(){this.service.update(this.id.$oid,this.note).then(()=>{this.show_edit_form(),this.$root.$emit("reload")},t=>{alert("Unexpected error, try again later.")})},delete_note(){const t="Are you sure you want to delete this note? It can't be restored.";confirm(t)&&this.service.remove(this.id.$oid).then(()=>{this.$root.$emit("reload")},t=>{alert("Unexpected error, try again later.")})}}},S=$,O=(s("0b4b"),Object(u["a"])(S,_,f,!1,null,"d891c186",null)),P=O.exports,j={components:{"my-note":P},data(){return{notes:[]}},created(){this.$store.getters.loggedIn?(this.service=new k(this.$resource,this.$store.state.token),this.service.get_all().then(t=>this.notes=t,t=>{console.log(t)})):this.$router.push({name:"login"})},mounted(){this.$root.$on("reload",()=>{this.service.get_all().then(t=>this.notes=t,t=>{console.log(t)})})},methods:{load(){console.log("voltou"),this.service.get_all().then(t=>this.notes=t,t=>{console.log(t)})}}},E=j,I=(s("b497"),Object(u["a"])(E,p,h,!1,null,null,null)),T=I.exports,N=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"login-page"},[s("login-form",{attrs:{formStyle:"form-login"}})],1)},V=[],U=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{class:"form "+t.formStyle},[s("ValidationObserver",{scopedSlots:t._u([{key:"default",fn:function(e){var o=e.handleSubmit;return[s("form",{on:{submit:function(e){return e.preventDefault(),o(t.save)}}},[s("div",t._l(t.api_errors,(function(e){return s("p",{staticClass:"erro_api"},[t._v(t._s(e))])})),0),t.register?s("div",{staticClass:"control"},[s("label",{attrs:{for:"name"}},[t._v("Username")]),s("ValidationProvider",{attrs:{rules:"required|min:3|max:30"},scopedSlots:t._u([{key:"default",fn:function(e){var o=e.errors;return[s("input",{directives:[{name:"model",rawName:"v-model",value:t.user.username,expression:"user.username"}],attrs:{id:"name"},domProps:{value:t.user.username},on:{input:function(e){e.target.composing||t.$set(t.user,"username",e.target.value)}}}),s("span",{staticClass:"error"},[t._v(t._s(o[0]))])]}}],null,!0)})],1):t._e(),s("br"),s("div",{staticClass:"control"},[s("label",{attrs:{for:"email"}},[t._v("email")]),s("ValidationProvider",{attrs:{rules:"required|min:8|max:120"},scopedSlots:t._u([{key:"default",fn:function(e){var o=e.errors;return[s("input",{directives:[{name:"model",rawName:"v-model",value:t.user.email,expression:"user.email"}],attrs:{id:"email"},domProps:{value:t.user.email},on:{input:function(e){e.target.composing||t.$set(t.user,"email",e.target.value)}}}),s("span",{staticClass:"error"},[t._v(t._s(o[0]))])]}}],null,!0)})],1),s("br"),s("div",{staticClass:"control"},[s("label",{attrs:{for:"password"}},[t._v("Password")]),s("ValidationProvider",{attrs:{rules:"required|min:8|max:120"},scopedSlots:t._u([{key:"default",fn:function(e){var o=e.errors;return[s("input",{directives:[{name:"model",rawName:"v-model",value:t.user.password,expression:"user.password"}],attrs:{type:"password",id:"password"},domProps:{value:t.user.password},on:{input:function(e){e.target.composing||t.$set(t.user,"password",e.target.value)}}}),s("span",{staticClass:"error"},[t._v(t._s(o[0]))])]}}],null,!0)})],1),s("form-button",{staticClass:"button",attrs:{type:"submit",btnStyle:"big account",text:t.register?"Register":"Login"}})],1)]}}])})],1)},q=[],D=class{constructor(t="",e="",s=""){this.username=t,this.email=e,this.password=s}};class A{constructor(t){this._resource=t}login(t){return this._resource("api/auth/login").save(t).catch(t=>{throw new Error(t.body.error)})}register(t){return this._resource("api/auth/signup").save(t).catch(t=>{throw new Error(t.body.error?t.body.error:t.body.message)})}recover_password(t){return this._resource("api/auth/forgot").save(t)}reset_password(t){return this._resource("api/auth/reset").save(t).catch(t=>{if(500==t.status)throw new Error("This link has expired, access your account to get a new one.");throw new Error(t.body.error?t.body.error:t.body.message)})}}var L=s("7bb1"),R={components:{"form-button":C,ValidationProvider:L["b"],ValidationObserver:L["a"]},props:{register:{type:Boolean},formStyle:{type:String}},data(){return{token:null,api_errors:[],user:new D}},methods:{save(){this.api_errors=[],this.register?(this.service=new A(this.$resource),this.service.register(this.user).then(t=>{this.$router.push({name:"login"})},t=>{this.api_errors.push(t)})):this.$store.dispatch("login",this.user).then(t=>{"/"!==this.$router.path&&this.$router.push({name:"tasks"})},t=>{this.api_errors.push(t)})}}},B=R,M=(s("a650"),Object(u["a"])(B,U,q,!1,null,"339a6bbe",null)),W=M.exports,J={components:{"login-form":W},data(){return{}}},z=J,F=(s("09c9"),Object(u["a"])(z,N,V,!1,null,null,null)),G=F.exports,H=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div")},K=[],Q={created(){this.$store.getters.loggedIn?confirm("Do you want to leave?")?(this.$store.dispatch("destroyToken"),this.$router.push({name:"login"})):this.$router.push({name:"tasks"}):this.$router.push({name:"login"})}},X=Q,Y=Object(u["a"])(X,H,K,!1,null,"4d99deec",null),Z=Y.exports,tt=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"register-page"},[s("login-form",{attrs:{register:!0}})],1)},et=[],st={components:{"login-form":W},data(){return{username:"",email:"",password:""}}},ot=st,rt=(s("5296"),Object(u["a"])(ot,tt,et,!1,null,"7204b461",null)),nt=rt.exports,it=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"dash-content"},[s("div",{staticClass:"box user-info"},[s("h2",[t._v("Username: "),t.edit_name_mode?s("div",{staticClass:"container"},[s("font-awesome-icon",{staticClass:"icon close-icon",attrs:{icon:["fa","times-circle"]},on:{click:function(e){return t.edit_mode("username")}}}),s("font-awesome-icon",{staticClass:"icon confirm-icon",attrs:{icon:["fa","check-circle"]},on:{click:function(e){return t.edit_data("username")}}}),s("input",{directives:[{name:"model",rawName:"v-model",value:t.input_username,expression:"input_username"}],staticClass:"user-input",domProps:{value:t.input_username},on:{input:function(e){e.target.composing||(t.input_username=e.target.value)}}})],1):s("div",{staticClass:"container"},[s("font-awesome-icon",{staticClass:"icon edit-icon",attrs:{icon:"edit"},on:{click:function(e){return t.edit_mode("username")}}}),s("span",[t._v(t._s(t.user.username))])],1)]),s("h2",[t._v("Email: "),t.edit_email_mode?s("div",{staticClass:"container"},[s("font-awesome-icon",{staticClass:"icon close-icon",attrs:{icon:["fa","times-circle"]},on:{click:function(e){return t.edit_mode("email")}}}),s("font-awesome-icon",{staticClass:"icon confirm-icon",attrs:{icon:["fa","check-circle"]},on:{click:function(e){return t.edit_data("email")}}}),s("input",{directives:[{name:"model",rawName:"v-model",value:t.input_email,expression:"input_email"}],staticClass:"user-input",domProps:{value:t.input_email},on:{input:function(e){e.target.composing||(t.input_email=e.target.value)}}})],1):s("div",{staticClass:"container"},[s("font-awesome-icon",{staticClass:"icon edit-icon",attrs:{icon:"edit"},on:{click:function(e){return t.edit_mode("email")}}}),s("span",[t._v(t._s(t.user.email))])],1)])]),s("div",{staticClass:"box account-info"},[s("form-button",{staticClass:"btn",attrs:{type:"button",btnStyle:"mid",text:"Change password"},on:{click:t.reset_password}}),s("form-button",{staticClass:"btn right-button",attrs:{type:"button",btnStyle:"mid danger",text:"Delete account"},on:{click:t.delete_user}})],1)])},at=[];class lt{constructor(t){this._resource=t("api/user")}get(){return this._resource.query().then(t=>t.json())}update(t){return this._resource.update(t).then(t=>t.json(),t=>{throw console.log(t.status),new Error(t)})}remove(){return this._resource.delete()}}var ct={components:{"form-button":C},data(){return{edit_name_mode:!1,edit_email_mode:!1,input_username:"",input_email:"",user:new D}},created(){this.$store.state.token?this.get_user_data():this.$router.push({name:"login"})},methods:{get_user_data(){this.service=new lt(this.$resource),this.service.get().then(t=>{this.user.username=t.username,this.input_username=t.username,this.user.email=t.email,this.input_email=t.email},t=>console.log(t))},reset_password(){this.authService=new A(this.$resource),this.authService.recover_password(this.user).then(t=>{alert("Email sent with recovery information.")},t=>{alert("We're having some problems, please try again later.")})},edit_mode(t){"username"==t?this.edit_name_mode=!this.edit_name_mode:this.edit_email_mode=!this.edit_email_mode},edit_data(t){"username"==t?null!=this.input_username&&""!=this.input_username?this.field=this.input_username:alert("Invalid "+t):null!=this.input_email&&""!=this.input_email?this.field=this.input_email:alert("Invalid "+t),this.data={[t]:this.field},this.service.update(this.data).then(()=>{this.edit_mode(t),this.get_user_data()},e=>{alert(`This ${t} already exists.`)})},delete_user(){const t="This will delete your account, you will lose all your data!\n            Do you want to continue?";confirm(t)&&this.service.remove().then(()=>{this.$router.push({name:"logout"})})}}},ut=ct,dt=(s("7529"),Object(u["a"])(ut,it,at,!1,null,"c6235e38",null)),mt=dt.exports,pt=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"dash-reset"},[s("div",{staticClass:"box"},[s("div",{staticClass:"errors_api"},t._l(t.api_errors,(function(e){return s("p",{staticClass:"error_api"},[t._v(t._s(e))])})),0),s("ValidationObserver",{scopedSlots:t._u([{key:"default",fn:function(e){var o=e.handleSubmit;return[s("form",{staticClass:"reset-form",on:{submit:function(e){return e.preventDefault(),o(t.reset)}}},[s("div",{staticClass:"control"},[s("label",{attrs:{for:"password"}},[t._v("New password:")]),s("ValidationProvider",{attrs:{rules:"required|min:8|max:120"},scopedSlots:t._u([{key:"default",fn:function(e){var o=e.errors;return[s("input",{directives:[{name:"model",rawName:"v-model",value:t.new_pass,expression:"new_pass"}],attrs:{type:"password",id:"password"},domProps:{value:t.new_pass},on:{input:function(e){e.target.composing||(t.new_pass=e.target.value)}}}),s("span",{staticClass:"error"},[t._v(t._s(o[0]))])]}}],null,!0)})],1),s("br"),s("br"),s("div",{staticClass:"control"},[s("label",{attrs:{for:"confirmation"}},[t._v("Confirm password:")]),s("ValidationProvider",{attrs:{rules:"required"},scopedSlots:t._u([{key:"default",fn:function(e){var o=e.errors;return[s("input",{directives:[{name:"model",rawName:"v-model",value:t.confirm_pass,expression:"confirm_pass"}],attrs:{type:"password",id:"confirmation"},domProps:{value:t.confirm_pass},on:{input:function(e){e.target.composing||(t.confirm_pass=e.target.value)}}}),s("span",{staticClass:"error"},[t._v(t._s(o[0]))])]}}],null,!0)})],1),s("form-button",{staticClass:"button",attrs:{type:"submit",btnStyle:"mid",text:"Save"}})],1)]}}])})],1)])},ht=[],_t={components:{"form-button":C,ValidationProvider:L["b"],ValidationObserver:L["a"]},data(){return{new_pass:null,confirm_pass:null,api_errors:[]}},created(){this.service=new A(this.$resource)},methods:{reset(){this.new_pass==this.confirm_pass?(this.api_errors=[],this.service.reset_password({reset_token:this.$route.params.token,password:this.new_pass}).then(()=>{alert("Password changed!"),this.$router.push({name:"login"})},t=>{this.api_errors.push(t)})):this.api_errors.push("The passwords need to match.")}}},ft=_t,vt=(s("dc21"),Object(u["a"])(ft,pt,ht,!1,null,"2470fefd",null)),gt=vt.exports;const bt=[{path:"/",name:"tasks",title:"Tasks",component:T},{path:"/user",name:"user",title:"User",component:mt},{path:"/login",name:"login",title:"Login",component:G},{path:"/register",name:"register",title:"Register",component:nt},{path:"/logout",name:"logout",title:"Logout",component:Z},{path:"/reset/:token",name:"reset",title:"Reset Password",component:gt,props:!0}];var wt={name:"app",components:{Sidebar:m},data(){return{routes:bt}}},yt=wt,Ct=(s("034f"),Object(u["a"])(yt,r,n,!1,null,null,null)),kt=Ct.exports,xt=s("8c4f"),$t=s("28dd"),St=s("2f62");o["a"].use(St["a"]);var Ot=new St["a"].Store({state:{token:localStorage.getItem("access_token")||null},getters:{loggedIn(t){return null!==t.token}},mutations:{authUser(t,e){t.token=e},destroyToken(t){t.token=null}},actions:{login(t,e){return new Promise((s,r)=>{const n=new A(o["a"].resource);n.login(e).then(e=>{const o=e.body.token;localStorage.setItem("access_token",o),t.commit("authUser",o),s(e)},t=>{r(t)})})},destroyToken(t){t.getters.loggedIn&&(localStorage.removeItem("access_token"),t.commit("destroyToken"))}}}),Pt=s("4c93");Object(L["c"])("required",{...Pt["a"],message:"The {_field_} is required"}),Object(L["c"])("min",{validate:(t,e)=>t.length>=e,message:"The {_field_} is too short"}),Object(L["c"])("max",{validate:(t,e)=>t.length<=e,message:"The {_field_} is too long"});var jt=s("ecee"),Et=s("c074"),It=s("ad3d");jt["c"].add([Et["b"],Et["d"],Et["c"],Et["a"]]),o["a"].component("font-awesome-icon",It["a"]),o["a"].config.productionTip=!1,o["a"].use(xt["a"]),o["a"].use($t["a"]),o["a"].http.options.root=Object({NODE_ENV:"production",BASE_URL:"/todo-list-vue/"}).API_URL?Object({NODE_ENV:"production",BASE_URL:"/todo-list-vue/"}).API_URL:"https://todo-list-flask-api.herokuapp.com/",o["a"].http.interceptors.push((t,e)=>{t.headers.set("Authorization","Bearer "+localStorage.getItem("access_token")),e()});const Tt=new xt["a"]({routes:bt,mode:"history"});new o["a"]({el:"#app",router:Tt,store:Ot,render:t=>t(kt)})},6511:function(t,e,s){},7529:function(t,e,s){"use strict";s("8cc4")},"8be3":function(t,e,s){"use strict";s("96ec")},"8cc4":function(t,e,s){},"96ec":function(t,e,s){},a05a:function(t,e,s){},a650:function(t,e,s){"use strict";s("b1a5")},b1a5:function(t,e,s){},b497:function(t,e,s){"use strict";s("ec01")},d106:function(t,e,s){},dc21:function(t,e,s){"use strict";s("6511")},e490:function(t,e,s){"use strict";s("a05a")},ec01:function(t,e,s){}});
//# sourceMappingURL=app.9da35aca.js.map